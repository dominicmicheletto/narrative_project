<!DOCTYPE html>
<html>
  <head>
    <meta charset="iso-8859-7" />
    <title>Modding in the Sims 4 - Thought Process to Realisation</title>

    <link href="styles/master.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/line-numbers/prism-line-numbers.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/line-highlight/prism-line-highlight.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism-tomorrow.min.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js" data-manual></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/line-highlight/prism-line-highlight.min.js"></script>

    <script src="scripts/p5.min.js" type="text/javascript"></script>
    <script src="scripts/script.js" type="text/javascript"></script>
  </head>
  <body class="ui-widget">
    <div id="main">
      <h1 id="title">Modding in the Sims 4 - Thought Process to Realisation</h1>
      <nav>
        <a href="./" class="current">Home</a>
      </nav>
      <p></p>
      <div id="progress"><div class="progress-label">0</div></div>
      <p></p>
      <div id="tabs">
        <ul>
          <li><a href="#tabs-1">Prelude</a></li>
          <li><a href="#tabs-2" class="disabled">Modding Terms</a></li>
          <li><a href="#tabs-3" class="disabled">Programs &amp; Utilities</a></li>
          <li><a href="#tabs-4" class="disabled">Motivation</a></li>
          <li><a href="#tabs-5" class="disabled">Features List</a></li>
          <li><a href="#tabs-6" class="disabled">Getting Started</a></li>
          <li><a href="#tabs-7" class="disabled">Tuning Explorer</a></li>
          <li><a href="#tabs-8" class="disabled">End</a></li>
        </ul>
        <div id="tabs-1">
          <p>
            Modding in the Sims 4 is in some ways both extremely easy and mildly difficult. From a coding standpoint, the Sims 4 is extremely data-driven, and this makes it quite easy to add and modify almost every aspect of the game’s tuning that is not hidden behind C++. On the other hand, there is a bit of legwork that’s required in order to understand how to mod the game. The biggest hurdle in learning how to mod the game is understanding the TDESCS – tuning descriptions – which the Devs use as an internal documentation for the tuning structure of the game.
          </p>
          <p>
            It is important to understand how the XML tuning is laid out, as while one can haphazardly throw something together that “works,” it will often be rife with errors. Many beginning modders start out without fully understanding what they’re doing and can get stuck. I have also encountered people who wish to endeavor upon a journey of modding, only to not understand what they’re doing.
          </p>
          <p>
            The game is built on 3 principle levels, C++, which is impossible to access, Python, whose source code needs to be decompiled once every patch, and Tuning, which is custom XML that gets loaded and read by the game and turned into Python dynamically. Most of what can be achieved in game can be done with simple XML changes or additions, but sometimes Python is required. This is often called “injection,” as the custom tuning is “injected” into the game (since it can usually be hardcoded by being added into the tuning). Injection is done to prevent conflicts with other mods which would like to modify the same resource – for example, often configuration pie menus are added to mailboxes, and if the tuning for mailboxes were overridden instead of injected, only the first mod that overrode the tuning would be registered.
          </p>
          <p>
            This also brings up the interesting point of load order and conflicts. Sometimes, two mods will modify the same resource, and thus load order issues result. Only the first instance of a tuning will be loaded by the game, and all subsequent versions will be ignored. This means that parts of a mod which depend on these overrides may not work.
          </p>
          <p>
            In order to mod the game, it is required to have at a minimum something which can extract and compile tuning to and from packages. The best tool for this is Sims 4 Studio, and it is what I personally use. A Python editor is also handy – personally, I use PyCharm. An invaluable tool also to have is the TDESC explorer, which allows an easy viewing of the TDESCs.
          </p>
          <p><a id="1" class="advance">Continue to the next section</a></p>
        </div>
        <div id="tabs-2">
          <p>
            Before I get into the nitty-gritty of modding in the Sims 4, it's
            important to establish some ground terms so that when I refer to them
            later, it's clear what I mean.
          </p>
          <p>
            Below is a table of some terms relating to Sims 4 tuning which will
            be important to have some understanding of.
          </p>
          <table class="styled">
            <thead>
              <tr>
                <th>Term</th>
                <th>Definition</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Loot</th>
                <td>
                  A loot is, for lack of a better term, a piece of code that
                  executes to perform some action. Often these are used to add
                  traits, buffs, and commodities to Sims.
                </td>
              </tr>
              <tr>
                <th>Trait</th>
                <td>
                  A trait is a straightforward concept, in the strictest
                  sense – it is a flag on a Sim which can be used to add
                  various stuff. Traits are more permanent than buffs and can
                  be used to ensure that buffs (which can get lost during
                  travelling) stay added to the Sim. Traits can be used in
                  numerous ways to add buffs, commodities, and affordances
                  to Sims.
                </td>
              </tr>
              <tr>
                <th>Buff</th>
                <td>
                  A buff, commonly called a moodlet, is also a type of flag on
                  a Sim. When they are visible, they often affect the mood of
                  the Sim they’re on, but they can do much more. Buffs can do
                  many things, like add affordances to Sims, add commodities,
                  change the decay rate of commodities, and more. They can
                  also be used to add CAS parts to Sims via appearance modifiers.
                </td>
              </tr>
              <tr>
                <th>Appearance Modifer</th>
                <td>
                  An appearance modifier adds a temporary overlay to the Sim,
                  changing while active every outfit the Sim has.
                </td>
              </tr>
              <tr>
                <th>CAS Part</th>
                <td>
                  CAS (Create A Sim) parts refer to the actual “item” the Sim
                  has on them.
                </td>
              </tr>
              <tr>
                <th>Commodity</th>
                <td>
                  A commodity is a, on a very basic level, a number attached to
                  a Sim, that can increase and decrease within a given range.
                  Commodities have discreet ranges, called states, and when a
                  given commodity reaches a certain state, things (such as
                  buffs being added, or loots being fired) can occur.
                  Commodities are very useful and versatile tools, and can be
                  used for various things, such as timers, trackers, or with
                  traits in conjunction with proximity buffs, as an example.
                </td>
              </tr>
              <tr>
                <th>Proximity Buff</th>
                <td>
                  A proximity buff is a buff that gets added to a Sim when
                  they are near (in proximity to) something, the something of
                  which is dependent on the tests described in the tuning.
                </td>
              </tr>
              <tr>
                <th>Affordance</th>
                <td>
                  At the simplest level, an affordance is nearly synonymous
                  with what we could call an “interaction.” An affordance is
                  something that a Sim is “afforded” – usually an interaction,
                  but it can be other things as well.
                </td>
              </tr>
            </tbody>
          </table>
          <p><a id="2" class="advance">Learn about Sims 4 Modding programs</a></p>
        </div>
        <div id="tabs-3">
          <p>
            Modding for the Sims 4 is far from a walk in the park. While the Sims
            4 is in some respects quite extensible and easy to mod, there are a
            few hurtles so to speak to overcome before one can dive in.
          </p>
          <p>
            Below is a table of some common programs that are needed/useful to
            mod the Sims, as well as some more useful information about modding.
          </p>
          <table class="styled">
            <thead>
              <tr>
                <th>&nbsp;</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Sims 4 Studio (S4S)</th>
                <td>Application</td>
                <td>
                  Sims 4 Studio is probably one of the most invaluable programs
                  to a those who wish to mod in the Sims 4. With S4S, one can
                  easily extract Sims 4 tuning files, and create new ones.
                  It can also be used to view package files and to piece together
                  new ones.
                </td>
              </tr>
              <tr>
                <th>PyCharm</th>
                <td>Application</td>
                <td>
                  PyCharm is a popular Python Editor/IDE (Integrated Development
                  Environment) among those who make script mods in the Sims 4.
                  PyCharm allows for creating and editing Python files, which
                  are the components of Script Mods. There is also a starter
                  project for Sims 4 Script Mods, which is another good reason
                  to consider using PyCharm when modding for the Sims 4.
                </td>
              </tr>
              <tr>
                <th>TDESC Explorer</th>
                <td>Application</td>
                <td>
                  This is an application which allows a user to easily and
                  rapidly explore the game's TDESCs, which is imperative to
                  anyone who wishes to mod.
                </td>
              </tr>
              <tr>
                <th>Notepad++</th>
                <td>Application</td>
                <td>
                  While this program isn't entirely needed like some of the
                  others, one may find it useful to use Notepad++ to edit and
                  view XML files, of which tuning is composed.
                </td>
              </tr>
              <tr>
                <th>TDESC</th>
                <td>Modding Utility</td>
                <td>
                  TDESC, or Tuning Description, is a file which describes the
                  tuning that is used by the Sims 4. While it takes some getting
                  used to, to fully be able to appreciate and comprehend how to
                  understand them, it is imperative that any modder have an
                  intimate understanding of what is allowed in the game and how
                  to "speak" the language of tuning used by it.
                </td>
              </tr>
              <tr>
                <th>String Table</th>
                <td>Tuning Component</td>
                <td>
                  A String Table is a binary file which describes the "strings",
                  or text, which is available to the game, as well as localisations
                  for said text. Any mod which wishes to inclcude custom text must
                  utilise a String Table.
                </td>
              </tr>
              <tr>
                <th>Package (<em>.package</em>)</th>
                <td>Sims 4 Mod File</td>
                <td>
                  A package is one of the two principle mod file types allowed for
                  The Sims 4. A package can contain tuning, string tables, images,
                  as well as the definitions for custom objects and other "CC"
                  &mdash; Custom Content: clothes, hair, makeup, etc.
                </td>
              </tr>
              <tr>
                <th>Script (<em>.ts4script</em>)</th>
                <td>Sims 4 Mod File</td>
                <td>
                  While a lot is possible with tuning alone, tuning has its limits.
                  Sometimes, either to avoid conflicts with other mods, or to
                  achieve what is desired, one must employ the use of Script Mods.
                  Script Mods consist of zipped compiled Python (<code>.pyc</code>)
                  files. These scripts can override in-game scripts, add to them,
                  or describe entirely new ones.
                </td>
              </tr>
            </tbody>
          </table>
          <p><a id="3" class="advance">So, why did I do this?</a></p>
        </div>
        <div id="tabs-4">
          <p>
            Some time around September of 2019, my friend (whom at the time I
            did not know very well) had requested a vampire mod for the Sims 4, one
            which would allow for vampires and their victims to get bloody when
            bitten. The modder who stepped forward to offer to make it, unfortunately,
            was soon revealed to be one that was anything but fast. To put it
            nicely, continents drift faster than they mod. They are also rather
            distractable, and had often given up on creating the mod for them in
            favour of pursuing other projects.
          </p>
          <p>
            After a few months of little to no progress, (and having gotten aquainted
            with who had at that point become a good friend of mine), I decided to
            surprise my friend during one of their lamentations about how the mod
            would never get finished.
          </p>
          <p>
            After 8 or so hours of intense modding, the first version of my mod
            was complete. Meanwhile, to date, the other modder still has not finished
            their implementation of this mod.
          </p>
          <p><a id="4" class="advance">Learn about what the mod can do</a></p>
        </div>
        <div id="tabs-5">
          <p>
            In this most simple of senses, this mod allows for a more immersive
            experience when playing Vampires, by allowing that they and their
            victims become bloody. However, this mod is much more than just
            that. Below is a feature list of the mod as it current stands,
            which is important as what is in it and what I envisioned it having
            helped shaped what I did during my creation of the mod.
          </p>
          <ul>
            <li>A tiered system for bloodiness of both Vampires and non-Vampires
            (aka their Victims)</li>
            <li>Victims have a tiered system of blood loss:
              <a href="#" class="popup" id="blood_loss_tier_1_buff">small</a>,
              <a href="#" class="popup" id="blood_loss_tier_2_buff">medium</a>, and
              <a href="#" class="popup" id="blood_loss_tier_3_buff">large</a>.
              At max blood loss, the Sim will die of exsanguination.</li>
            <li>Vampires will get a new
                <a href="#" class="popup" id="bloody_mess_buff">buff</a>
                about being covered in blood</li>
            <li>When a Sim is very drained, they will get a
                <a href="#" class="popup" id="bleeding_out_warning">warning</a>
                about having lost a lot of blood.</li>
            <li>A reduction in the cooldown for drinking from the same Sim twice</li>
            <li>A new death type: Exsanguination</li>
            <li>Alterations to <code>Ask for Permission to Drink</code>,
                <code>Compel for Small Drink</code>,
                <code>Compel for Large Drink</code>, and
                <code>Drain Life Spirit</code> interactions:
              <ul>
                <li>Both
                  <a href="#" class="popup" id="bloody_vampire_example">Vampire</a> and
                  <a href="#" class="popup" id="bloody_victim_example">Victim<a/>
                  will get appropriately bloody</li>
                <li>Chance of
                    <a href="#" class="popup" id="death_by_exsanguination">death</a>
                    of the Victim when being drank from</li>
              </ul>
            </li>
            <li>A new ghost type to go with the new death:
              <ul>
                <li>Called <a href="#" class="popup" id="death_by_exsanguination_trait">
                  "Death By Exsanguination"</a></li>
                <li><a href="#" class="popup" id="angry_around_vampires">
                  Gets angry around Vampires</a></li>
                <li>Gets tired more quickly</li>
              </ul>
            </li>
            <li>New interactions on tubs and showers to
              <a href="#" class="popup" id="wash_off_blood_interaction">wash</a>
              off blood</li>
            <li>When brushing a bloody Vampire's teeth, blood on their mouth will
                also be cleaned</li>
            <li>Vampires covered in blood will get
              <a href="#" class="popup" id="sticky_blood_buff">uncomfortable</a> when covered
                in blood for an extended period of time</li>
            <li>Bloody vampires will get a
               <a href="#" class="popup" id="want_to_wash_off_blood">Whim</a>
               to clean themselves of blood</li>
            <li>Getting wet (from showering, swimming, being in the rain, etc)
                will also lessen the bloodiness of a Sim</li>
          </ul>
          <p><a id="5" class="advance">So, how'd I start?</a></p>
        </div>
        <div id="tabs-6">
          <form><input type="hidden" id="step" value="0" /></form>
          <div id="arena"></div>
        </div>
        <div id="tabs-7">
          <p>
            Below you will get to preview a choice few of the source files that
            went into the making of this mod, highlighting the major facets of
            code which went into its creation. While this is by no means an
            exhaustive or completely in-depth look at the source code of the mod,
            the code snippets I did chose to highlight show off the main
            parts of the code which were fundamental to the mod and were integral
            to establishing what I had envisioned in game.
          </p>
          <p>
            Each code block has internal comments, but will be accompanied by a
            more in-depth description of what the tuning is, why it was used/made,
            and how I decided to add what I did.
          </p>
          <div class="ui-widget">
            <p>
              <label>Select the tuning file to explore: </label>
              <select id="combobox">
                <option value="" selected="selected">Select one...</option>
                <option value="commodity_bloodiness_vampire">Bloodiness Commodity</option>
                <option value="loot_make_bloody">"Make Bloody" Loot</option>
                <option value="loot_removeisbloody">"Remove Bloody" Loot</option>
                <option value="vampire_DrinkDeeply">Drink Deeply Interaction</option>
                <option value="buff_hidden_vampire_bloodiness_tier1">Tier 1 Bloodiness Buff for Vampires</option>
                <option value="buff_vampire_isbloody">"Is Bloody" Buff for Vampires</option>
              </select>
            </p>
          </div>
          <div class="line-numbers code" id="code_preview">
            <div>
              <p>
                This, and the other two related buffs, as well as the three others
                which apply to non-Vampire Sims, is rather straightforward. All it
                does is apply a CAS part as an appearance modifier, giving the
                Sim with this buff a specific (defined elsewhere) overlay on them.
                In this case, it is blood around the Vampire's mouth, for obvious
                reasons.
              </p>
              <p>
                These buffs are the real "driving" force of the visible parts of
                the mod, even if the buffs themselves are ironically hidden. They
                are given to Sims as a result of the corresponding bloodiness commodity
                reaching a desired state threshold.
              </p>
              <p>
                The tier 1 bloodiness buff for Vampires is the only one shown as it
                would be rather boring to show all 6 buffs considering they are rather
                boilerplate.
              </p>
              <pre data-src="./documented code/buff_hidden_vampire_bloodiness_tier1_documented.xml"></pre>
            </div>
            <div>
              <p>
                This is a rather important buff, which is evident by the sheer size
                of the tuning associated with it. This buff, among other things,
                is the main "controller" of the bloodiness of the Vampire Sim,
                giving them the interactions to wash off blood.
              </p>
              <p>
                This buff is applied to every Vampire Sim who has their bloodiness
                commodity not at the ground state (i.e. if the Sim is bloody, they
                should have this buff).
              </p>
              <ul>
                <li>
                  Test Set - this test set ensures that only Vampire Sims can
                  receive this buff. This prevents other Sims who are not Vampires
                  from being given any of the "effects" of this buff, as this buff
                  cannot be added to them. The Victim version of this buff has
                  a similar test, though obviously reversed -- Vampires are unable
                  to receive it.
                </li>
                <li>
                  Target Super Affordances - When a Vampire Sim has this buff,
                  they will gain access to two new interactions, allowing for them
                  to wash blood off themselves in both showers and tubs.
                  <ul>
                    <li>
                      For showers:
                      <ul>
                        <li>Affordance: the affordance to add. In this case, it is
                          a clone of the shower interaction which will remove all
                          blood from the Vampire Sim.</li>
                        <li>Object filter: any object that is tagged as a "shower"
                            basically will have this affordance adding to it and
                            available to the Sim.</li>
                      </ul>
                    </li>
                    <li>
                      For tubs, it is the same as above, but the affordance is
                      instead a clone of the bathing interaction, and the object
                      filter instead applies to anything tagged as a "bathtub".
                    </li>
                  </ul>
                  By adding a Target Super Affordance tuning to the buff, injection
                  is not needed. While this can be also achieved by Python, I found
                  this method much easier, and allowed for me to not have to keep a
                  list of showers and tubs, or find a way to inject into objects with
                  a specific tag as the game already does. "Don't reinvent the wheel"
                  essentially. This also has the added benefit of automatically working
                  with custom (CC) showers and tubs, as long as they are tagged
                  correctly.
                </li>
                <li>
                  Game Effect Modifier - this is the biggest "bit" of the buff,
                  and does various things. This also allowed me to avoid having to
                  have had used Python to achieve what I wanted. While this method
                  was by now means "easier", I was happy with the final results.
                  <ul>
                    <li>
                      Affordance Modifiers - This allows for affordances (read: interactions)
                      to be directly modified by this buff. This allows for any
                      interaction that would make a Sim be "wet" to decrease the
                      bloodiness commodity, and separately allows for the brush teeth
                      interactions to clean the blood off a Vampire Sim as an alternative
                      to showering or bathing.
                      <ul>
                        <li>
                          For modification of "getting wet" interactions:
                          <ul>
                            <li>
                              Basic Extras - modify the specified interactions'
                              <code>basic_extras</code>, essentially allowing for
                              adding to the outcome of these interactions.
                              <ul>
                                <li>
                                  Buff - add a buff to the Vampire when these interactions
                                  are started. This buff allows for a continuous, but
                                  slow, decrease of the bloodiness stat for the duration of
                                  the interaction, which allows for a mirroring of
                                  the perioid stat change of the drinking interactions.
                                </li>
                                <li>
                                  Loot List, at beginning: this fires a loot which
                                  decreases a set amount the commodity at the onset
                                  of the interaction a sizeable amount. This accounts
                                  for the duration of the interaction, so that just
                                  running the interaction decreases the stat, even
                                  if the interaction is fast, or gets interrupted.
                                </li>
                                <li>
                                  Loot List, at end: remove the buff that was
                                  added at the beginning of this interaction by
                                  <code>buff_fire_and_forget</code>.
                                </li>
                              </ul>
                            </li>
                            <li>
                              Affordance List - a list of affordances which will
                              be affected by this injection. In this case, it's a custom
                              affordance list, since the amount of interactions is
                              rather quite large, but it includes anything I considered
                              "something that would leave your Sim wet", including:
                              <ul>
                                <li>Swimming</li>
                                <li>Playing in the rain</li>
                                <li>Bathing but <strong>not</strong> the
                                    "Wash off Blood" interactions themselves</li>
                                <li>And more</li>
                              </ul>
                            </li>
                          </ul>
                        </li>
                        <li>
                          For modificaton of "brushing teeth" (there are two
                          versions, one for "off the grid" lots that have limited water):
                          <ul>
                            <li>Basic Extras - these are similar to the above, but
                                tailored for the brushing teeth interactions. The
                                same setup of <code>buff_fire_and_forget</code> and
                                two loot list injections was used here.</li>
                            <li>Affordances - since this was only two affordances
                                being modified, I decided to just list them instead
                                of making an affordance list.</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      Continuous Statistic Modifier - For every Sim minute a
                      Vampire Sim has this buff (that is, is covered in blood in
                      some form or another), a commodity for "sticky blood" is increased.
                      What this does, basically, is that, when a Vampire has had
                      blood on their face and body for too long without having
                      washed it off, they will get uncomfortable from having
                      "sticky blood" all over themselves. I added this as a cool
                      little detail to help flesh-out the mod. Blood, after all,
                      dries and who likes being covered in copious amounts of dried
                      blood?
                    </li>
                  </ul>
                </li>
              </ul>
              <pre data-src="./documented code/buff_vampire_isbloody_documented.xml"></pre>
            </div>
            <div>
              <p>
                This commodity is what "ties" everything together, and for that
                reason, is one of the most integral part of the mod. The main reason
                I used a commodity is because of the power and flexibility they
                offer: since commodities have discreet states, the "bloodiness" of
                a Sim can rise and fall over time, through various activity (i.e.
                drinking from a Sim, getting wet, or just the passage of time).
                A commodity also provides the unique ability for the bloodiness of
                a Sim to slowly decay over time instead of just all at once going
                away.
              </p>
              <p>
                The commodity itself was rather straightforward. It consists of
                four discreet states, three of which are "tiers" of bloodiness and
                one which represents the "ground state" of not being bloody at all.
              </p>
              <ul>
                <li>
                  Ground State - Value of 0: Since it's the ground state, it must
                  re-establish what the Vampire Sim would be like before having
                  had this commodity set. That means that when entering this state,
                  any changes this commodity brought about must be reversed.
                  <ul>
                    <li>Loot List: Apply the specified loot whenever this commodity
                        reaches this state. In particular, this loot removes the buffs and
                        trait associated with being bloody.
                    </li>
                  </ul>
                </li>
                <li>
                  Tier 1 - Between 1 and 240: This is the first "tier" of bloodiness.
                  This state must first establish some groundwork in the event a
                  Sim loads with this value instead of coming to it "naturally",
                  such as saving and reloading, or from travelling.
                  <ul>
                    <li>
                        Loot List: Apply the specified loot whenever this commodity
                        enters this state. This loot establishes some of the groundwork:
                        the trait and buff that controls being bloody.
                    </li>
                    <li>
                       Buff: This is the tier one buff that a Vampire gets
                       when they are bloody, giving them the first appearance
                       modifier.
                    </li>
                    <li>
                      Buff Threshold: To prevent the bloodiness buff from being
                      applied too soon, there is a slight "delay" to the adding
                      of this buff. The buff will only be added once the commodity
                      reached a value of at least 30, which provides some wiggle
                      room for the actual drinking interaction to have run the
                      part where a Sim gets bitten before applying bloodiness to
                      the Vampire's mouth.
                    </li>
                  </ul>
                </li>
                <li>
                  Tier 2 - Between 241 and 480: This is the second "tier" of bloodiness.
                  As before, this state must establish some groundwork to ensure
                  that everything is set up properly. This state also does not need
                  a delay factor as the previous one did.
                  <ul>
                    <li>
                        Loot List: Apply the specified loot whenever this commodity
                        enters this state. This loot establishes some of the groundwork:
                        the trait and buff that controls being bloody.
                    </li>
                    <li>
                       Buff: This is the tier two buff that a Vampire gets
                       when they are bloody, giving them the second appearance
                       modifier.
                    </li>
                  </ul>
                </li>
                <li>
                  Tier 3 - Between 481 and 720: This is the third and last "tier"
                  of bloodiness. This state must also establish some groundwork
                  to ensure that everything is set up properly like the others.
                  As is the case for the previous state, there is no need for a
                  delay factor here.
                  <ul>
                    <li>
                        Loot List: Apply the specified loot whenever this commodity
                        enters this state. This loot establishes some of the groundwork:
                        the trait and buff that controls being bloody.
                    </li>
                    <li>
                       Buff: This is the tier three buff that a Vampire gets
                       when they are bloody, giving them the last and most bloody
                       appearance modifier.
                    </li>
                  </ul>
                </li>
              </ul>
              <p>
                This commodity is incremented by the drinking interactions and
                is lowered by any interaction which may get a Sim "wet", or by
                the brushing of one's teeth. Should a Sim choose the "Wash off Blood"
                interaction, all blood will be purged from their body and the commodity
                reset to its ground state of 0.
              </p>
              <pre data-src="./documented code/commodity_bloodiness_vampire_documented.xml"></pre>
            </div>
            <div>
              <p>
                This loot is rather quite simple, doing 3 main, relatively-straightforward
                operations. This is also the loot that gets run every time the
                bloodiness commodity is pushed outside of its ground state.
              </p>
              <ul>
                <li>
                  Adds the hidden "Is Bloody" buff which is important for several
                  things but namely is responsbile for adding the interactions
                  to wash off blood.
                </li>
                <li>
                  Adds the visible buff Vampires get when they are bloody. While
                  this buff doesn't <em>do</em> much all on its own, it does add
                  something to the game.
                </li>
                <li>
                  Adds a trait which signifies that the Sim is covered in blood.
                  This trait at the moment only adds the Whim to wash off blood,
                  but in the future will have some proximity buffs associated with
                  it: when a Vampire is covered in blood, other Sims will get tense
                  and react negatively to being "caught" red-faced, and other
                  Vampires (particularly mean or evil ones) may cheer them on.
                </li>
              </ul>
              <p>
                While this loot is relatively simple in and of itself, it can be
                thought of as analogous to a function of sorts, doing a routine
                set of actions every time a Vampire becomes bloody.
              </p>
              <pre data-src="./documented code/loot_make_bloody_documented.xml"></pre>
            </div>
            <div>
              <p>
                This is essentially the counterpart to the "Make Bloody" loot, and
                can be seen as sort of "clean up" code. It undoes that which the
                "Make Bloody" loot and the bloodiness commodity itself does.
              </p>
              <ul>
                <li>
                  Removal of all blood-related buffs: this is important as it
                  removes any buffs, hidden and visible, that a Vampire Sim may
                  have gained during gameplay. While under normal circumstances
                  the visible buffs would be removed once the a Sim transitions
                  out of the state associated with them, this is a fail-safe and
                  some extra cleanup in case a Sim all of a sudden finds themselves
                  in the ground state.
                </li>
                <li>
                  Removal of the "Is Bloody" trait: this ensures that the Sim
                  will no longer get the Whim to wash blood off their body, since
                  they are, in fact, no longer bloody.
                </li>
              </ul>
              <pre data-src="./documented code/loot_removeisbloody_documented.xml"></pre>
            </div>
            <div>
              <p>
                This is probably one of the most important parts of this mod, as
                it's the place where the mod gets "hooked into" the game.
              </p>
              <p>
                This is an override of the Drink Deeply interaction available for
                Vampire Sims, and, for the most part, its code has been left largely
                untouched. However, there are some important additions to the code
                which allow for interfacing with the bloodiness and blood level commodities,
                thus setting in motion the rest of the mod.
              </p>
              <ul>
                <li>
                  Periodic Stat Change: Bloodiness of Actor ("The Vampire")
                  <ul>
                    <li>Amount: 10</li>
                    <li>Subject: Actor</li>
                    <li>
                      Behaviour: Apply At Interval Only
                      From the TDESCs:
                      <blockquote class="quote">
                        If continuous statistic is using interval behavior,
                        the amount tuned will be given at specified interval if
                        chance and tests succeeds.  Continuous statistics WILL decay
                        between interval time.
                      </blockquote>
                    </li>
                    <li>Stat: the bloodiness stat for Vampires</li>
                    <li>
                      Tests: these tests must both pass in order for the stat to
                      be incremented. Both of these tests are to ensure that the
                      stat is only increased at the desired moments during the
                      animation of the interaction.
                      <ul>
                        <li>
                          Sim <strong>must</strong> have the "Drink In Progress"
                          buff.
                        </li>
                        <li>
                          Sim must <strong>not</strong> have the
                          "Drink in Progress Delay Bloodiness" buff.
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  Periodic Stat Change: Bloodiness of TargetSim ("The Victim")
                  <ul>
                    <li>Amount: 10</li>
                    <li>Subject: TargetSim</li>
                    <li>
                      Behaviour: Apply At Interval Only
                    </li>
                    <li>Stat: the bloodiness stat for Victims</li>
                    <li>
                      Tests: these tests must both pass in order for the stat to
                      be incremented. Both of these tests are to ensure that the
                      stat is only increased at the desired moments during the
                      animation of the interaction.
                      <ul>
                        <li>
                          Sim <strong>must</strong> have the "Drink In Progress"
                          buff.
                        </li>
                        <li>
                          Sim must <strong>not</strong> have the
                          "Drink in Progress Delay Bloodiness (Victim)" buff.
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
              <p>
                The alteration to this (and the other related drinking interactions)
                occurs in the <code>periodic_stat_change</code> part of the
                interaction's <code>basic_content</code>. The basic content of an
                interaction defines the animation that plays, depending on how it's
                tuned, for the duration of the interaction. This allows for an
                interaction to have "parts" which contribute to one larger "outcome".
              </p>
              <p>
                The normal Drink interaction increases a Vampire's thirst and decreases
                the Victim's energy, so the groundwork was already there. Doing it
                like this, instead of just in the outcome, allows more closely to
                mirror what one would expect: the Vampire and the Victim get
                <em>progressively more</em> bloody as the drinking interaction occurs.
                This also has the added benefit that, the longer a Sim drinks, the
                bloodier both their Victim and they themselves will get, which
                would not be possible strictly from altering the outcome alone.
              </p>
              <pre data-src="./documented code/vampire_DrinkDeeply_documented.xml" data-line="116-179"></pre>
            </div>
          </div>
          <p><a id="7" class="advance">That's all, folks!</a></p>
        </div>
        <div id="tabs-8">
          <p>
            Thank you for taking a small journey with me through a Sims 4
            modding experience! I hope you had fun learning some of the work and
            thought process that goes into modding!
          </p>
          <p>
            Now that you're done, you can go back and revisit all the tabs.
          </p>
        </div>
      </div>
    </div>
    </div>
    <div id="footer">
      <p>&nbsp;</p>
    </div>
  </body>
</html>
